{"ast":null,"code":"var _jsxFileName = \"/Users/jae/Downloads/dispatch_vehicles/dispatch_vehicles/simulation_vis/src/components/Trip.js\",\n  _s = $RefreshSig$();\n/* global window */\n// Trip.js - 교수님 형식 유지(토큰/Mapbox 그대로), 필요한 부분만 개선\n\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport DeckGL from \"@deck.gl/react\";\nimport { Map } from \"react-map-gl\"; // ✅ Mapbox 버전 유지\n\nimport { AmbientLight, PointLight, LightingEffect } from \"@deck.gl/core\";\nimport { TripsLayer } from \"@deck.gl/geo-layers\";\nimport { ScatterplotLayer, ArcLayer } from \"@deck.gl/layers\";\nimport Slider from \"@mui/material/Slider\";\nimport \"../css/trip.css\";\n\n/* -------------------- 조명 -------------------- */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ambientLight = new AmbientLight({\n  color: [255, 255, 255],\n  intensity: 1.0\n});\nconst pointLight = new PointLight({\n  color: [255, 255, 255],\n  intensity: 2.0,\n  position: [127.13, 37.45, 5000]\n});\nconst lightingEffect = new LightingEffect({\n  ambientLight,\n  pointLight\n});\nconst DEFAULT_THEME = {\n  effects: [lightingEffect]\n};\n\n/* -------------------- 초기 뷰(성남) -------------------- */\nconst INITIAL_VIEW_STATE = {\n  longitude: 127.126,\n  latitude: 37.42,\n  zoom: 11.8,\n  pitch: 30,\n  bearing: 0\n};\n\n/* -------------------- Mapbox 스타일/토큰 (교수님 형식 유지) -------------------- */\nconst mapStyle = \"mapbox://styles/spear5306/ckzcz5m8w002814o2coz02sjc\"; // 교수님 코드 그대로\nconst MAPBOX_TOKEN = `pk.eyJ1Ijoic2hlcnJ5MTAyNCIsImEiOiJjbG00dmtic3YwbGNoM2Zxb3V5NmhxZDZ6In0.ZBrAsHLwNihh7xqTify5hQ`; // 그대로\n\n/* -------------------- 시간/표시 유틸 -------------------- */\nconst addZero = v => v.toString().length < 2 ? \"0\" + v : v;\nconst toHHMM = t => `${addZero(parseInt(Math.round(t) / 60 % 24))}:${addZero(Math.round(t) % 60)}`;\n\n/* -------------------- 설정(아크 토글) -------------------- */\nconst SHOW_MATCH_ARCS = false; // 차량→픽업 링크\nconst SHOW_OCC_ARCS = false; // 현재→목적지 링크\n\n/* -------------------- 데이터 자동 로드 -------------------- */\nasync function fetchJSON(url) {\n  const r = await fetch(url);\n  if (!r.ok) throw new Error(`${url} ${r.status}`);\n  return r.json();\n}\nconst Trip = props => {\n  _s();\n  var _ref, _props$trip, _ref2, _props$passengers;\n  const [time, setTime] = useState(0);\n  const [animation] = useState({});\n  const [autoTrip, setAutoTrip] = useState(null);\n  const [autoPax, setAutoPax] = useState(null);\n\n  // props 우선, 없으면 /public/data 사용\n  const trip = (_ref = (_props$trip = props.trip) !== null && _props$trip !== void 0 ? _props$trip : autoTrip) !== null && _ref !== void 0 ? _ref : [];\n  const passengers = (_ref2 = (_props$passengers = props.passengers) !== null && _props$passengers !== void 0 ? _props$passengers : autoPax) !== null && _ref2 !== void 0 ? _ref2 : [];\n  useEffect(() => {\n    if (props.trip && props.passengers) return;\n    (async () => {\n      try {\n        const [t, p] = await Promise.all([fetchJSON(\"/data/trips.json\"), fetchJSON(\"/data/passengers.json\")]);\n        setAutoTrip(t);\n        setAutoPax(p);\n      } catch (e) {\n        console.error(\"데이터 자동 로드 실패:\", e);\n      }\n    })();\n  }, [props.trip, props.passengers]);\n\n  /* -------------------- 최대 시간 계산 -------------------- */\n  const maxTripTime = useMemo(() => {\n    let m = 0;\n    (trip || []).forEach(t => {\n      var _t$timestamp;\n      const last = t === null || t === void 0 ? void 0 : (_t$timestamp = t.timestamp) === null || _t$timestamp === void 0 ? void 0 : _t$timestamp[t.timestamp.length - 1];\n      if (typeof last === \"number\" && last > m) m = last;\n    });\n    return m;\n  }, [trip]);\n  const maxPaxTime = useMemo(() => {\n    let m = 0;\n    (passengers || []).forEach(p => {\n      var _p$timestamp;\n      const last = p === null || p === void 0 ? void 0 : (_p$timestamp = p.timestamp) === null || _p$timestamp === void 0 ? void 0 : _p$timestamp[p.timestamp.length - 1];\n      if (typeof last === \"number\" && last > m) m = last;\n    });\n    return m;\n  }, [passengers]);\n  const maxTime = useMemo(() => {\n    const m = Math.max(60, maxTripTime, maxPaxTime);\n    return Number.isFinite(m) && m > 0 ? m : 60;\n  }, [maxTripTime, maxPaxTime]);\n\n  /* -------------------- 애니메이션 -------------------- */\n  const step = useCallback(t => t > maxTime ? 0 : t + 0.01 * 0.5, [maxTime]); // speed=0.5\n  const animate = useCallback(() => {\n    setTime(t => step(t));\n    animation.id = window.requestAnimationFrame(animate);\n  }, [animation, step]);\n  useEffect(() => {\n    animation.id = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animation.id);\n  }, [animation, animate]);\n\n  /* -------------------- 레이어별 데이터 -------------------- */\n  // 픽업 전 승객만 표시\n  const visiblePassengers = useMemo(() => {\n    if (!Array.isArray(passengers)) return [];\n    return passengers.filter(p => Array.isArray(p.timestamp) && p.timestamp.length === 2 && p.timestamp[0] <= time && time < p.timestamp[1]);\n  }, [passengers, time]);\n\n  // 목적지(픽업~도착 사이에만)\n  const destinationsNow = useMemo(() => {\n    if (!Array.isArray(trip)) return [];\n    const arr = [];\n    for (const t of trip) {\n      if (!(t !== null && t !== void 0 && t.route) || !(t !== null && t !== void 0 && t.timestamp) || t.route.length < 2 || t.timestamp.length < 2) continue;\n      const drop = t.route[t.route.length - 1];\n      const start = t.timestamp.length > 1 ? t.timestamp[1] : t.timestamp[0];\n      const end = t.timestamp[t.timestamp.length - 1];\n      if (typeof start === \"number\" && typeof end === \"number\" && time >= start && time <= end) {\n        arr.push({\n          location: drop\n        });\n      }\n    }\n    return arr;\n  }, [trip, time]);\n\n  // (옵션) 매칭 아크: 차량→픽업\n  const matchArcs = useMemo(() => {\n    if (!SHOW_MATCH_ARCS || !Array.isArray(trip)) return [];\n    const arcs = [];\n    for (const t of trip) {\n      if (!(t !== null && t !== void 0 && t.route) || !(t !== null && t !== void 0 && t.timestamp) || t.route.length < 2 || t.timestamp.length < 2) continue;\n      const ts = t.timestamp,\n        rt = t.route;\n      const start = ts[0],\n        pickupTime = ts[1];\n      if (typeof start !== \"number\" || typeof pickupTime !== \"number\") continue;\n      if (time < start || time > pickupTime) continue;\n\n      // 현재 위치 보간\n      let idx = 0;\n      for (let k = 0; k < ts.length - 1; k++) {\n        if (typeof ts[k] === \"number\" && typeof ts[k + 1] === \"number\" && ts[k] <= time && time < ts[k + 1]) {\n          idx = k;\n          break;\n        }\n        if (time >= ts[ts.length - 1]) idx = ts.length - 2;\n      }\n      const a = rt[Math.max(0, Math.min(idx, rt.length - 1))];\n      const b = rt[Math.max(0, Math.min(idx + 1, rt.length - 1))];\n      const t0 = ts[Math.max(0, Math.min(idx, ts.length - 1))];\n      const t1 = ts[Math.max(0, Math.min(idx + 1, ts.length - 1))];\n      let curr = a;\n      if (typeof t0 === \"number\" && typeof t1 === \"number\" && t1 > t0) {\n        const alpha = Math.max(0, Math.min(1, (time - t0) / (t1 - t0)));\n        curr = [a[0] + (b[0] - a[0]) * alpha, a[1] + (b[1] - a[1]) * alpha];\n      }\n      const pickup = rt[1];\n      if (Array.isArray(curr) && Array.isArray(pickup)) arcs.push({\n        source: curr,\n        target: pickup\n      });\n    }\n    return arcs;\n  }, [trip, time]);\n\n  // (옵션) 탑승중 아크: 현재→목적지\n  const occArcs = useMemo(() => {\n    if (!SHOW_OCC_ARCS || !Array.isArray(trip)) return [];\n    const arcs = [];\n    for (const t of trip) {\n      if (!(t !== null && t !== void 0 && t.route) || !(t !== null && t !== void 0 && t.timestamp) || t.route.length < 2 || t.timestamp.length < 2) continue;\n      const ts = t.timestamp,\n        rt = t.route;\n      const pickupTime = ts[1],\n        dropTime = ts[ts.length - 1];\n      if (typeof pickupTime !== \"number\" || typeof dropTime !== \"number\") continue;\n      if (time < pickupTime || time > dropTime) continue;\n\n      // 현재 위치 보간\n      let idx = 0;\n      for (let k = 0; k < ts.length - 1; k++) {\n        if (typeof ts[k] === \"number\" && typeof ts[k + 1] === \"number\" && ts[k] <= time && time < ts[k + 1]) {\n          idx = k;\n          break;\n        }\n        if (time >= ts[ts.length - 1]) idx = ts.length - 2;\n      }\n      const a = rt[Math.max(0, Math.min(idx, rt.length - 1))];\n      const b = rt[Math.max(0, Math.min(idx + 1, rt.length - 1))];\n      const t0 = ts[Math.max(0, Math.min(idx, ts.length - 1))];\n      const t1 = ts[Math.max(0, Math.min(idx + 1, ts.length - 1))];\n      let curr = a;\n      if (typeof t0 === \"number\" && typeof t1 === \"number\" && t1 > t0) {\n        const alpha = Math.max(0, Math.min(1, (time - t0) / (t1 - t0)));\n        curr = [a[0] + (b[0] - a[0]) * alpha, a[1] + (b[1] - a[1]) * alpha];\n      }\n      const dest = rt[rt.length - 1];\n      if (Array.isArray(curr) && Array.isArray(dest)) arcs.push({\n        source: curr,\n        target: dest\n      });\n    }\n    return arcs;\n  }, [trip, time]);\n\n  /* -------------------- 레이어 -------------------- */\n  const layers = [new TripsLayer({\n    id: \"trips\",\n    data: trip,\n    getPath: d => d.route,\n    // [[lon,lat], ...]\n    getTimestamps: d => d.timestamp,\n    // [min, ...]\n    getColor: [135, 206, 235],\n    opacity: 1,\n    widthMinPixels: 7,\n    rounded: true,\n    capRounded: true,\n    jointRounded: true,\n    trailLength: 0.5,\n    currentTime: time,\n    shadowEnabled: false\n  }), new ScatterplotLayer({\n    id: \"passengers\",\n    data: visiblePassengers,\n    getPosition: d => d.location,\n    // [lon,lat]\n    getFillColor: [255, 255, 255],\n    getRadius: 6,\n    radiusUnits: \"pixels\",\n    pickable: true,\n    updateTriggers: {\n      getPosition: [time]\n    }\n  }), new ScatterplotLayer({\n    id: \"destinations\",\n    data: destinationsNow,\n    getPosition: d => d.location,\n    getFillColor: [255, 165, 0],\n    getRadius: 5,\n    radiusUnits: \"pixels\",\n    pickable: false,\n    updateTriggers: {\n      getPosition: [time]\n    }\n  }), ...(SHOW_MATCH_ARCS ? [new ArcLayer({\n    id: \"match-arcs\",\n    data: matchArcs,\n    getSourcePosition: d => d.source,\n    getTargetPosition: d => d.target,\n    getSourceColor: [255, 255, 255],\n    getTargetColor: [255, 255, 255],\n    getWidth: 3,\n    pickable: false,\n    updateTriggers: {\n      getSourcePosition: [time],\n      getTargetPosition: [time]\n    }\n  })] : []), ...(SHOW_OCC_ARCS ? [new ArcLayer({\n    id: \"occupied-arcs\",\n    data: occArcs,\n    getSourcePosition: d => d.source,\n    getTargetPosition: d => d.target,\n    getSourceColor: [30, 144, 255],\n    getTargetColor: [30, 144, 255],\n    getWidth: 1.5,\n    pickable: false,\n    updateTriggers: {\n      getSourcePosition: [time],\n      getTargetPosition: [time]\n    }\n  })] : [])];\n\n  /* -------------------- 렌더 -------------------- */\n  const onSlider = e => setTime(e.target.value);\n  const [hh, mm] = useMemo(() => [addZero(parseInt(Math.round(time) / 60 % 24)), addZero(Math.round(time) % 60)], [time]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"trip-container\",\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(DeckGL, {\n      effects: DEFAULT_THEME.effects,\n      initialViewState: INITIAL_VIEW_STATE,\n      controller: true,\n      layers: layers,\n      children: /*#__PURE__*/_jsxDEV(Map, {\n        mapStyle: mapStyle,\n        mapboxAccessToken: MAPBOX_TOKEN,\n        preventStyleDiffing: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"time\",\n      children: [\"TIME : \", `${hh} : ${mm}`]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Slider, {\n      id: \"slider\",\n      value: time,\n      min: 0,\n      max: maxTime,\n      onChange: onSlider,\n      track: \"inverted\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 275,\n    columnNumber: 5\n  }, this);\n};\n_s(Trip, \"YuxWpnl1F629RQo6wss+aqI2mXg=\");\n_c = Trip;\nexport default Trip;\nvar _c;\n$RefreshReg$(_c, \"Trip\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","DeckGL","Map","AmbientLight","PointLight","LightingEffect","TripsLayer","ScatterplotLayer","ArcLayer","Slider","jsxDEV","_jsxDEV","ambientLight","color","intensity","pointLight","position","lightingEffect","DEFAULT_THEME","effects","INITIAL_VIEW_STATE","longitude","latitude","zoom","pitch","bearing","mapStyle","MAPBOX_TOKEN","addZero","v","toString","length","toHHMM","t","parseInt","Math","round","SHOW_MATCH_ARCS","SHOW_OCC_ARCS","fetchJSON","url","r","fetch","ok","Error","status","json","Trip","props","_s","_ref","_props$trip","_ref2","_props$passengers","time","setTime","animation","autoTrip","setAutoTrip","autoPax","setAutoPax","trip","passengers","p","Promise","all","e","console","error","maxTripTime","m","forEach","_t$timestamp","last","timestamp","maxPaxTime","_p$timestamp","maxTime","max","Number","isFinite","step","animate","id","window","requestAnimationFrame","cancelAnimationFrame","visiblePassengers","Array","isArray","filter","destinationsNow","arr","route","drop","start","end","push","location","matchArcs","arcs","ts","rt","pickupTime","idx","k","a","min","b","t0","t1","curr","alpha","pickup","source","target","occArcs","dropTime","dest","layers","data","getPath","d","getTimestamps","getColor","opacity","widthMinPixels","rounded","capRounded","jointRounded","trailLength","currentTime","shadowEnabled","getPosition","getFillColor","getRadius","radiusUnits","pickable","updateTriggers","getSourcePosition","getTargetPosition","getSourceColor","getTargetColor","getWidth","onSlider","value","hh","mm","className","style","children","initialViewState","controller","mapboxAccessToken","preventStyleDiffing","fileName","_jsxFileName","lineNumber","columnNumber","onChange","track","_c","$RefreshReg$"],"sources":["/Users/jae/Downloads/dispatch_vehicles/dispatch_vehicles/simulation_vis/src/components/Trip.js"],"sourcesContent":["/* global window */\r\n// Trip.js - 교수님 형식 유지(토큰/Mapbox 그대로), 필요한 부분만 개선\r\n\r\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\r\n\r\nimport DeckGL from \"@deck.gl/react\";\r\nimport { Map } from \"react-map-gl\"; // ✅ Mapbox 버전 유지\r\n\r\nimport { AmbientLight, PointLight, LightingEffect } from \"@deck.gl/core\";\r\nimport { TripsLayer } from \"@deck.gl/geo-layers\";\r\nimport { ScatterplotLayer, ArcLayer } from \"@deck.gl/layers\";\r\n\r\nimport Slider from \"@mui/material/Slider\";\r\nimport \"../css/trip.css\";\r\n\r\n/* -------------------- 조명 -------------------- */\r\nconst ambientLight = new AmbientLight({ color: [255, 255, 255], intensity: 1.0 });\r\nconst pointLight = new PointLight({ color: [255, 255, 255], intensity: 2.0, position: [127.13, 37.45, 5000] });\r\nconst lightingEffect = new LightingEffect({ ambientLight, pointLight });\r\nconst DEFAULT_THEME = { effects: [lightingEffect] };\r\n\r\n/* -------------------- 초기 뷰(성남) -------------------- */\r\nconst INITIAL_VIEW_STATE = {\r\n  longitude: 127.126, latitude: 37.42, zoom: 11.8, pitch: 30, bearing: 0\r\n};\r\n\r\n/* -------------------- Mapbox 스타일/토큰 (교수님 형식 유지) -------------------- */\r\nconst mapStyle = \"mapbox://styles/spear5306/ckzcz5m8w002814o2coz02sjc\"; // 교수님 코드 그대로\r\nconst MAPBOX_TOKEN = `pk.eyJ1Ijoic2hlcnJ5MTAyNCIsImEiOiJjbG00dmtic3YwbGNoM2Zxb3V5NmhxZDZ6In0.ZBrAsHLwNihh7xqTify5hQ`; // 그대로\r\n\r\n/* -------------------- 시간/표시 유틸 -------------------- */\r\nconst addZero = (v) => (v.toString().length < 2 ? \"0\" + v : v);\r\nconst toHHMM = (t) => `${addZero(parseInt((Math.round(t) / 60) % 24))}:${addZero(Math.round(t) % 60)}`;\r\n\r\n/* -------------------- 설정(아크 토글) -------------------- */\r\nconst SHOW_MATCH_ARCS = false; // 차량→픽업 링크\r\nconst SHOW_OCC_ARCS   = false; // 현재→목적지 링크\r\n\r\n/* -------------------- 데이터 자동 로드 -------------------- */\r\nasync function fetchJSON(url) {\r\n  const r = await fetch(url);\r\n  if (!r.ok) throw new Error(`${url} ${r.status}`);\r\n  return r.json();\r\n}\r\n\r\nconst Trip = (props) => {\r\n  const [time, setTime] = useState(0);\r\n  const [animation] = useState({});\r\n  const [autoTrip, setAutoTrip] = useState(null);\r\n  const [autoPax, setAutoPax] = useState(null);\r\n\r\n  // props 우선, 없으면 /public/data 사용\r\n  const trip = props.trip ?? autoTrip ?? [];\r\n  const passengers = props.passengers ?? autoPax ?? [];\r\n\r\n  useEffect(() => {\r\n    if (props.trip && props.passengers) return;\r\n    (async () => {\r\n      try {\r\n        const [t, p] = await Promise.all([\r\n          fetchJSON(\"/data/trips.json\"),\r\n          fetchJSON(\"/data/passengers.json\"),\r\n        ]);\r\n        setAutoTrip(t);\r\n        setAutoPax(p);\r\n      } catch (e) {\r\n        console.error(\"데이터 자동 로드 실패:\", e);\r\n      }\r\n    })();\r\n  }, [props.trip, props.passengers]);\r\n\r\n  /* -------------------- 최대 시간 계산 -------------------- */\r\n  const maxTripTime = useMemo(() => {\r\n    let m = 0;\r\n    (trip || []).forEach(t => {\r\n      const last = t?.timestamp?.[t.timestamp.length - 1];\r\n      if (typeof last === \"number\" && last > m) m = last;\r\n    });\r\n    return m;\r\n  }, [trip]);\r\n\r\n  const maxPaxTime = useMemo(() => {\r\n    let m = 0;\r\n    (passengers || []).forEach(p => {\r\n      const last = p?.timestamp?.[p.timestamp.length - 1];\r\n      if (typeof last === \"number\" && last > m) m = last;\r\n    });\r\n    return m;\r\n  }, [passengers]);\r\n\r\n  const maxTime = useMemo(() => {\r\n    const m = Math.max(60, maxTripTime, maxPaxTime);\r\n    return Number.isFinite(m) && m > 0 ? m : 60;\r\n  }, [maxTripTime, maxPaxTime]);\r\n\r\n  /* -------------------- 애니메이션 -------------------- */\r\n  const step = useCallback((t) => (t > maxTime ? 0 : t + 0.01 * 0.5), [maxTime]); // speed=0.5\r\n  const animate = useCallback(() => {\r\n    setTime((t) => step(t));\r\n    animation.id = window.requestAnimationFrame(animate);\r\n  }, [animation, step]);\r\n\r\n  useEffect(() => {\r\n    animation.id = window.requestAnimationFrame(animate);\r\n    return () => window.cancelAnimationFrame(animation.id);\r\n  }, [animation, animate]);\r\n\r\n  /* -------------------- 레이어별 데이터 -------------------- */\r\n  // 픽업 전 승객만 표시\r\n  const visiblePassengers = useMemo(() => {\r\n    if (!Array.isArray(passengers)) return [];\r\n    return passengers.filter(\r\n      (p) =>\r\n        Array.isArray(p.timestamp) &&\r\n        p.timestamp.length === 2 &&\r\n        p.timestamp[0] <= time &&\r\n        time < p.timestamp[1]\r\n    );\r\n  }, [passengers, time]);\r\n\r\n  // 목적지(픽업~도착 사이에만)\r\n  const destinationsNow = useMemo(() => {\r\n    if (!Array.isArray(trip)) return [];\r\n    const arr = [];\r\n    for (const t of trip) {\r\n      if (!t?.route || !t?.timestamp || t.route.length < 2 || t.timestamp.length < 2) continue;\r\n      const drop = t.route[t.route.length - 1];\r\n      const start = t.timestamp.length > 1 ? t.timestamp[1] : t.timestamp[0];\r\n      const end   = t.timestamp[t.timestamp.length - 1];\r\n      if (typeof start === \"number\" && typeof end === \"number\" && time >= start && time <= end) {\r\n        arr.push({ location: drop });\r\n      }\r\n    }\r\n    return arr;\r\n  }, [trip, time]);\r\n\r\n  // (옵션) 매칭 아크: 차량→픽업\r\n  const matchArcs = useMemo(() => {\r\n    if (!SHOW_MATCH_ARCS || !Array.isArray(trip)) return [];\r\n    const arcs = [];\r\n    for (const t of trip) {\r\n      if (!t?.route || !t?.timestamp || t.route.length < 2 || t.timestamp.length < 2) continue;\r\n      const ts = t.timestamp, rt = t.route;\r\n      const start = ts[0], pickupTime = ts[1];\r\n      if (typeof start !== \"number\" || typeof pickupTime !== \"number\") continue;\r\n      if (time < start || time > pickupTime) continue;\r\n\r\n      // 현재 위치 보간\r\n      let idx = 0;\r\n      for (let k = 0; k < ts.length - 1; k++) {\r\n        if (typeof ts[k] === \"number\" && typeof ts[k + 1] === \"number\" && ts[k] <= time && time < ts[k + 1]) { idx = k; break; }\r\n        if (time >= ts[ts.length - 1]) idx = ts.length - 2;\r\n      }\r\n      const a = rt[Math.max(0, Math.min(idx, rt.length - 1))];\r\n      const b = rt[Math.max(0, Math.min(idx + 1, rt.length - 1))];\r\n      const t0 = ts[Math.max(0, Math.min(idx, ts.length - 1))];\r\n      const t1 = ts[Math.max(0, Math.min(idx + 1, ts.length - 1))];\r\n      let curr = a;\r\n      if (typeof t0 === \"number\" && typeof t1 === \"number\" && t1 > t0) {\r\n        const alpha = Math.max(0, Math.min(1, (time - t0) / (t1 - t0)));\r\n        curr = [a[0] + (b[0] - a[0]) * alpha, a[1] + (b[1] - a[1]) * alpha];\r\n      }\r\n      const pickup = rt[1];\r\n      if (Array.isArray(curr) && Array.isArray(pickup)) arcs.push({ source: curr, target: pickup });\r\n    }\r\n    return arcs;\r\n  }, [trip, time]);\r\n\r\n  // (옵션) 탑승중 아크: 현재→목적지\r\n  const occArcs = useMemo(() => {\r\n    if (!SHOW_OCC_ARCS || !Array.isArray(trip)) return [];\r\n    const arcs = [];\r\n    for (const t of trip) {\r\n      if (!t?.route || !t?.timestamp || t.route.length < 2 || t.timestamp.length < 2) continue;\r\n      const ts = t.timestamp, rt = t.route;\r\n      const pickupTime = ts[1], dropTime = ts[ts.length - 1];\r\n      if (typeof pickupTime !== \"number\" || typeof dropTime !== \"number\") continue;\r\n      if (time < pickupTime || time > dropTime) continue;\r\n\r\n      // 현재 위치 보간\r\n      let idx = 0;\r\n      for (let k = 0; k < ts.length - 1; k++) {\r\n        if (typeof ts[k] === \"number\" && typeof ts[k + 1] === \"number\" && ts[k] <= time && time < ts[k + 1]) { idx = k; break; }\r\n        if (time >= ts[ts.length - 1]) idx = ts.length - 2;\r\n      }\r\n      const a = rt[Math.max(0, Math.min(idx, rt.length - 1))];\r\n      const b = rt[Math.max(0, Math.min(idx + 1, rt.length - 1))];\r\n      const t0 = ts[Math.max(0, Math.min(idx, ts.length - 1))];\r\n      const t1 = ts[Math.max(0, Math.min(idx + 1, ts.length - 1))];\r\n      let curr = a;\r\n      if (typeof t0 === \"number\" && typeof t1 === \"number\" && t1 > t0) {\r\n        const alpha = Math.max(0, Math.min(1, (time - t0) / (t1 - t0)));\r\n        curr = [a[0] + (b[0] - a[0]) * alpha, a[1] + (b[1] - a[1]) * alpha];\r\n      }\r\n      const dest = rt[rt.length - 1];\r\n      if (Array.isArray(curr) && Array.isArray(dest)) arcs.push({ source: curr, target: dest });\r\n    }\r\n    return arcs;\r\n  }, [trip, time]);\r\n\r\n  /* -------------------- 레이어 -------------------- */\r\n  const layers = [\r\n    new TripsLayer({\r\n      id: \"trips\",\r\n      data: trip,\r\n      getPath: (d) => d.route,            // [[lon,lat], ...]\r\n      getTimestamps: (d) => d.timestamp,  // [min, ...]\r\n      getColor: [135, 206, 235],\r\n      opacity: 1,\r\n      widthMinPixels: 7,\r\n      rounded: true,\r\n      capRounded: true,\r\n      jointRounded: true,\r\n      trailLength: 0.5,\r\n      currentTime: time,\r\n      shadowEnabled: false,\r\n    }),\r\n    new ScatterplotLayer({\r\n      id: \"passengers\",\r\n      data: visiblePassengers,\r\n      getPosition: (d) => d.location,     // [lon,lat]\r\n      getFillColor: [255, 255, 255],\r\n      getRadius: 6,\r\n      radiusUnits: \"pixels\",\r\n      pickable: true,\r\n      updateTriggers: { getPosition: [time] },\r\n    }),\r\n    new ScatterplotLayer({\r\n      id: \"destinations\",\r\n      data: destinationsNow,\r\n      getPosition: (d) => d.location,\r\n      getFillColor: [255, 165, 0],\r\n      getRadius: 5,\r\n      radiusUnits: \"pixels\",\r\n      pickable: false,\r\n      updateTriggers: { getPosition: [time] },\r\n    }),\r\n    ...(SHOW_MATCH_ARCS\r\n      ? [\r\n          new ArcLayer({\r\n            id: \"match-arcs\",\r\n            data: matchArcs,\r\n            getSourcePosition: (d) => d.source,\r\n            getTargetPosition: (d) => d.target,\r\n            getSourceColor: [255, 255, 255],\r\n            getTargetColor: [255, 255, 255],\r\n            getWidth: 3,\r\n            pickable: false,\r\n            updateTriggers: { getSourcePosition: [time], getTargetPosition: [time] },\r\n          }),\r\n        ]\r\n      : []),\r\n    ...(SHOW_OCC_ARCS\r\n      ? [\r\n          new ArcLayer({\r\n            id: \"occupied-arcs\",\r\n            data: occArcs,\r\n            getSourcePosition: (d) => d.source,\r\n            getTargetPosition: (d) => d.target,\r\n            getSourceColor: [30, 144, 255],\r\n            getTargetColor: [30, 144, 255],\r\n            getWidth: 1.5,\r\n            pickable: false,\r\n            updateTriggers: { getSourcePosition: [time], getTargetPosition: [time] },\r\n          }),\r\n        ]\r\n      : []),\r\n  ];\r\n\r\n  /* -------------------- 렌더 -------------------- */\r\n  const onSlider = (e) => setTime(e.target.value);\r\n  const [hh, mm] = useMemo(() => [addZero(parseInt((Math.round(time) / 60) % 24)), addZero(Math.round(time) % 60)], [time]);\r\n\r\n  return (\r\n    <div className=\"trip-container\" style={{ position: \"relative\" }}>\r\n      <DeckGL effects={DEFAULT_THEME.effects} initialViewState={INITIAL_VIEW_STATE} controller layers={layers}>\r\n        {/* ✅ 교수님 형식: Mapbox + 토큰 그대로 */}\r\n        <Map mapStyle={mapStyle} mapboxAccessToken={MAPBOX_TOKEN} preventStyleDiffing />\r\n      </DeckGL>\r\n\r\n      <h1 className=\"time\">TIME : {`${hh} : ${mm}`}</h1>\r\n\r\n      <Slider id=\"slider\" value={time} min={0} max={maxTime} onChange={onSlider} track=\"inverted\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Trip;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}